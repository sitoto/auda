<% @page_title =  t("categories.list") %>
<h1><%= t("categories.list") %></h1>

<table class="table table-bordered">
  <thead>
    <tr>
      <th><%= t('nodes.list') %></th>
      <th><%= t("categories.name") %></th>
      <th><%= t("categories.alias") %></th>
      <th><%= t("creater") %></th>
      <th><%= t("last_editor") %></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <%- unless @categories.blank?  -%>
      <% @categories.each do |category| %>
        <tr>
          <th><%= category.node.blank? ? "" : category.node.name  %></th>
          <th rowspan='1' title= "<%= category.note %>"><%= category.name %></th>
          <td><%= category.alias %></td>
          <td><%= category.user.blank? ? "" : category.user.name %></td>
          <td><%= category.last_edit_user.blank? ? "" : category.last_edit_user.name %></td>
          <td colspan="1">
            <%= link_to t('show'), category %>
            <%- if can? :update, category -%>
              |<%= link_to t('edit'), edit_category_path(category) %>
            <%- end -%>
            <%- if can? :destroy, category -%>
             |<%= link_to t('destroy'), category, method: :delete, data: { confirm: t('categories.delete', name: category.name) } %>
            <%- end -%>
          </td>

        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>

<br>
<%- if can? :create, @category -%>
  <%= link_to t('categories.new'), new_category_path %>
<%- end -%>
